<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boundless Network - ETH 质押管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .loading {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .glow-effect {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        .stake-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid #e2e8f0;
        }
        .stats-card {
            background: linear-gradient(145deg, #f1f5f9 0%, #ffffff 100%);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <div class="gradient-bg text-white py-12">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <div class="flex items-center justify-center mb-6">
                    <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mr-4">
                        <i data-lucide="layers" class="w-8 h-8"></i>
                    </div>
                    <div>
                        <h1 class="text-4xl font-bold">Boundless Network</h1>
                        <p class="text-blue-100 text-lg">ETH 质押与提取管理</p>
                    </div>
                </div>
                <div class="max-w-2xl mx-auto">
                    <p class="text-blue-100 text-lg leading-relaxed">
                        在 Boundless 去中心化计算市场中管理您的 ETH 质押，查询余额并随时提取资金
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <!-- 连接状态 -->
        <div class="bg-white rounded-xl card-shadow p-6 mb-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                        <i data-lucide="wifi" class="w-6 h-6 text-blue-600"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800">连接状态</h2>
                        <p class="text-gray-600">网络: <span id="networkStatus" class="font-medium">未连接</span></p>
                    </div>
                </div>
                <button id="connectWallet" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-all duration-200 font-medium">
                    连接钱包
                </button>
            </div>
            
            <div id="walletInfo" class="mt-6 hidden">
                <div class="bg-gray-50 rounded-lg p-4">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <p class="text-sm text-gray-600 mb-1">钱包地址</p>
                            <p id="walletAddress" class="font-mono text-sm break-all bg-white p-2 rounded border"></p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600 mb-1">连接状态</p>
                            <div class="flex items-center">
                                <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                <span class="text-green-600 font-medium">已连接</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 统计概览 -->
        <div class="grid md:grid-cols-3 gap-6 mb-8">
            <div class="stats-card rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <i data-lucide="piggy-bank" class="w-6 h-6 text-green-600"></i>
                    </div>
                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">质押余额</span>
                </div>
                <div>
                    <p id="stakedBalance" class="text-2xl font-bold text-gray-800">-- ETH</p>
                    <p id="stakedUsdValue" class="text-sm text-gray-600">≈ $--</p>
                </div>
            </div>
            
            <div class="stats-card rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i data-lucide="wallet" class="w-6 h-6 text-blue-600"></i>
                    </div>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">可用余额</span>
                </div>
                <div>
                    <p id="availableBalance" class="text-2xl font-bold text-gray-800">-- ETH</p>
                    <p id="availableUsdValue" class="text-sm text-gray-600">≈ $--</p>
                </div>
            </div>
            
            <div class="stats-card rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i data-lucide="trending-up" class="w-6 h-6 text-purple-600"></i>
                    </div>
                    <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full">总价值</span>
                </div>
                <div>
                    <p id="totalValue" class="text-2xl font-bold text-gray-800">-- ETH</p>
                    <p id="totalUsdValue" class="text-sm text-gray-600">≈ $--</p>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
            <!-- 质押操作 -->
            <div class="stake-card rounded-xl p-6 card-shadow">
                <div class="flex items-center mb-6">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                        <i data-lucide="plus-circle" class="w-6 h-6 text-green-600"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800">质押 ETH</h2>
                        <p class="text-gray-600 text-sm">将 ETH 质押到 Boundless 网络</p>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            质押金额 (ETH)
                        </label>
                        <div class="relative">
                            <input 
                                type="number" 
                                id="stakeAmount" 
                                placeholder="0.0" 
                                step="0.001"
                                min="0"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"
                            >
                            <div class="absolute right-3 top-3 text-gray-500 font-medium">ETH</div>
                        </div>
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>最小质押: 0.001 ETH</span>
                            <span id="maxStakeAmount">余额: -- ETH</span>
                        </div>
                    </div>
                    
                    <!-- 快速选择金额 -->
                    <div class="grid grid-cols-4 gap-2">
                        <button class="stake-quick-amount bg-gray-100 hover:bg-gray-200 py-2 px-3 rounded text-sm transition-colors" data-amount="0.01">0.01</button>
                        <button class="stake-quick-amount bg-gray-100 hover:bg-gray-200 py-2 px-3 rounded text-sm transition-colors" data-amount="0.1">0.1</button>
                        <button class="stake-quick-amount bg-gray-100 hover:bg-gray-200 py-2 px-3 rounded text-sm transition-colors" data-amount="1">1</button>
                        <button class="stake-quick-amount bg-gray-100 hover:bg-gray-200 py-2 px-3 rounded text-sm transition-colors" data-amount="max">最大</button>
                    </div>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <i data-lucide="info" class="w-5 h-5 text-blue-600 mr-2 mt-0.5"></i>
                            <div class="text-sm text-blue-800">
                                <p class="font-medium mb-1">质押说明</p>
                                <ul class="text-xs space-y-1">
                                    <li>• 质押的 ETH 将用于 Boundless 计算市场</li>
                                    <li>• 可随时提取，无锁定期限制</li>
                                    <li>• 参与网络治理和获得奖励</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <button 
                        id="stakeButton" 
                        class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg transition-all duration-200 font-medium flex items-center justify-center"
                    >
                        <i data-lucide="plus-circle" class="w-5 h-5 mr-2"></i>
                        质押 ETH
                    </button>
                </div>
            </div>

            <!-- 提取操作 -->
            <div class="stake-card rounded-xl p-6 card-shadow">
                <div class="flex items-center mb-6">
                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mr-4">
                        <i data-lucide="minus-circle" class="w-6 h-6 text-red-600"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800">提取 ETH</h2>
                        <p class="text-gray-600 text-sm">从 Boundless 网络提取您的 ETH</p>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            提取金额 (ETH)
                        </label>
                        <div class="relative">
                            <input 
                                type="number" 
                                id="withdrawAmount" 
                                placeholder="0.0" 
                                step="0.001"
                                min="0"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-lg"
                            >
                            <div class="absolute right-3 top-3 text-gray-500 font-medium">ETH</div>
                        </div>
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>最小提取: 0.001 ETH</span>
                            <span id="maxWithdrawAmount">可提取: -- ETH</span>
                        </div>
                    </div>
                    
                    <!-- 快速选择金额 -->
                    <div class="grid grid-cols-4 gap-2">
                        <button class="withdraw-quick-amount bg-gray-100 hover:bg-gray-200 py-2 px-3 rounded text-sm transition-colors" data-amount="0.01">0.01</button>
                        <button class="withdraw-quick-amount bg-gray-100 hover:bg-gray-200 py-2 px-3 rounded text-sm transition-colors" data-amount="0.1">0.1</button>
                        <button class="withdraw-quick-amount bg-gray-100 hover:bg-gray-200 py-2 px-3 rounded text-sm transition-colors" data-amount="1">1</button>
                        <button class="withdraw-quick-amount bg-gray-100 hover:bg-gray-200 py-2 px-3 rounded text-sm transition-colors" data-amount="max">全部</button>
                    </div>
                    
                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <i data-lucide="alert-triangle" class="w-5 h-5 text-amber-600 mr-2 mt-0.5"></i>
                            <div class="text-sm text-amber-800">
                                <p class="font-medium mb-1">提取说明</p>
                                <ul class="text-xs space-y-1">
                                    <li>• 提取操作通常在几分钟内完成</li>
                                    <li>• 需要支付少量 Gas 费用</li>
                                    <li>• 确保有足够的 ETH 支付交易费</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <button 
                        id="withdrawButton" 
                        class="w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg transition-all duration-200 font-medium flex items-center justify-center"
                    >
                        <i data-lucide="minus-circle" class="w-5 h-5 mr-2"></i>
                        提取 ETH
                    </button>
                </div>
            </div>
        </div>

        <!-- 余额查询 -->
        <div class="bg-white rounded-xl card-shadow p-6 mt-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                        <i data-lucide="search" class="w-6 h-6 text-blue-600"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800">余额查询</h2>
                        <p class="text-gray-600 text-sm">查询任意地址在 Boundless 网络中的余额</p>
                    </div>
                </div>
                <button id="refreshBalances" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors text-sm">
                    <i data-lucide="refresh-cw" class="w-4 h-4 mr-1 inline"></i>
                    刷新
                </button>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        查询地址 (可选，默认使用当前钱包)
                    </label>
                    <div class="flex space-x-2">
                        <input 
                            type="text" 
                            id="queryAddress" 
                            placeholder="0x..." 
                            class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        >
                        <button 
                            id="queryBalance" 
                            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors"
                        >
                            查询
                        </button>
                    </div>
                </div>
                
                <div id="queryResult" class="hidden">
                    <p class="text-sm font-medium text-gray-700 mb-2">查询结果</p>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">质押余额:</span>
                                <span id="queryStakedBalance" class="font-mono font-medium">-- ETH</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">可用余额:</span>
                                <span id="queryAvailableBalance" class="font-mono font-medium">-- ETH</span>
                            </div>
                            <div class="flex justify-between border-t pt-2">
                                <span class="text-gray-800 font-medium">总计:</span>
                                <span id="queryTotalBalance" class="font-mono font-semibold">-- ETH</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 交易历史 -->
        <div class="bg-white rounded-xl card-shadow p-6 mt-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                        <i data-lucide="history" class="w-6 h-6 text-purple-600"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800">交易历史</h2>
                        <p class="text-gray-600 text-sm">您在 Boundless 网络中的所有操作记录</p>
                    </div>
                </div>
                <select id="historyFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                    <option value="all">所有操作</option>
                    <option value="stake">质押记录</option>
                    <option value="withdraw">提取记录</option>
                </select>
            </div>
            
            <div id="transactionHistory" class="space-y-3">
                <div class="text-center py-12 text-gray-500">
                    <i data-lucide="inbox" class="w-12 h-12 mx-auto mb-4 opacity-50"></i>
                    <p>暂无交易记录</p>
                    <p class="text-sm">完成质押或提取操作后，记录将显示在这里</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 加载模态框 -->
    <div id="loadingModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-sm mx-4 text-center">
            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="loader" class="w-8 h-8 loading text-blue-600"></i>
            </div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">处理中</h3>
            <p id="loadingText" class="text-gray-600">请稍候...</p>
        </div>
    </div>

    <!-- 确认模态框 -->
    <div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 max-w-md mx-4">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i id="confirmIcon" data-lucide="check-circle" class="w-8 h-8 text-blue-600"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">确认操作</h3>
                <p class="text-gray-600">请确认以下操作详情</p>
            </div>
            
            <div class="space-y-3 mb-6">
                <div class="flex justify-between py-2 border-b">
                    <span class="text-gray-600">操作类型:</span>
                    <span id="confirmOperationType" class="font-semibold">--</span>
                </div>
                <div class="flex justify-between py-2 border-b">
                    <span class="text-gray-600">金额:</span>
                    <span id="confirmAmount" class="font-semibold">--</span>
                </div>
                <div class="flex justify-between py-2 border-b">
                    <span class="text-gray-600">预估 Gas 费:</span>
                    <span id="confirmGasFee" class="text-sm">--</span>
                </div>
                <div class="flex justify-between py-2">
                    <span class="text-gray-600">网络:</span>
                    <span id="confirmNetwork" class="text-sm">Boundless Network</span>
                </div>
            </div>
            
            <div class="flex space-x-3">
                <button id="cancelOperation" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 rounded-lg transition-colors font-medium">
                    取消
                </button>
                <button id="confirmOperation" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg transition-colors font-medium">
                    确认
                </button>
            </div>
        </div>
    </div>

    <script src="boundless-script.js"></script>
    <script>
        // 初始化 Lucide 图标
        lucide.createIcons();
    </script>
</body>
</html>